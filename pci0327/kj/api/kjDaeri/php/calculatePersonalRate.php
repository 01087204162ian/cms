<?php
/**
 * 할인할증률 계산 함수
 * 
 * @param int|string|null $rate 할인할증 코드
 * @return array{rate: float, name: string} 계산된 할인할증률과 해당 명칭
 */
function calculatePersonalRate($rate): array {
    // 입력값이 null이거나 숫자로 변환 불가능한 경우 처리
    if ($rate === null || !is_numeric($rate)) {
        return ['rate' => 1.000, 'name' => '기본'];
    }
    
    // 정수로 변환
    $rateInt = (int)$rate;
    
    // PHP 8.0 이상에서 사용할 수 있는 match 표현식 활용
    return match($rateInt) {
        1 => ['rate' => 1.000, 'name' => '기본'],
        2 => ['rate' => 0.900, 'name' => '할인'],
        3 => ['rate' => 0.925, 'name' => '3년간 사고건수 0건 1년간 사고건수 0건 무사고 1년 이상'],
        4 => ['rate' => 0.898, 'name' => '3년간 사고건수 0건 1년간 사고건수 0건 무사고 2년 이상'],
        5 => ['rate' => 0.889, 'name' => '3년간 사고건수 0건 1년간 사고건수 0건 무사고 3년 이상'],
        6 => ['rate' => 1.074, 'name' => '3년간 사고건수 1건 1년간 사고건수 0건'],
        7 => ['rate' => 1.085, 'name' => '3년간 사고건수 1건 1년간 사고건수 1'],
        8 => ['rate' => 1.242, 'name' => '3년간 사고건수 2건 1년간 사고건수 0'],
        9 => ['rate' => 1.253, 'name' => '3년간 사고건수 2건 1년간 사고건수 1'],
        10 => ['rate' => 1.314, 'name' => '3년간 사고건수 2건 1년간 사고건수 2'],
        11 => ['rate' => 1.428, 'name' => '3년간 사고건수 3건이상 1년간 사고건수 0'],
        12 => ['rate' => 1.435, 'name' => '3년간 사고건수 3건이상 1년간 사고건수 1'],
        13 => ['rate' => 1.447, 'name' => '3년간 사고건수 3건이상 1년간 사고건수 2'],
        14 => ['rate' => 1.459, 'name' => '3년간 사고건수 3건이상 1년간 사고건수 3건이상'],
        default => ['rate' => 1.000, 'name' => '기본'],
    };
}