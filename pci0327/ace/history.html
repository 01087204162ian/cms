<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í™€ì¸ì› ë³´í—˜ - ê°€ì…ë‚´ì—­</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <!-- CSS í†µí•©: ace.cssì— history ê´€ë ¨ ìŠ¤íƒ€ì¼ì´ í¬í•¨ë˜ì–´ ìˆìŒ -->

    <link href="css/ace.css" rel="stylesheet">
</head>
<body id="history-page">
    <div class="app-container">
        <!-- ë„¤ë¹„ê²Œì´ì…˜ íƒ­ -->
        <div class="nav-tabs-container">
            <ul class="nav-tabs">
                <li><button id="nav-signup">ê°€ì… ì‹ ì²­</button></li>
                <li><button id="nav-claim">ë³´ìƒ ì‹ ì²­</button></li>
                <li><button id="nav-history" class="active">ê°€ì…ë‚´ì—­</button></li>
                <li><button id="nav-faq">Q&A</button></li>
                <li><button id="nav-terms">ë³´ì¥ ë‚´ìš©</button></li>
            </ul>
        </div>
        
        <!-- ê°€ì…ë‚´ì—­ í˜ì´ì§€ -->
        <div class="page-content">
            <!-- ê°€ì…ë‚´ì—­ ë°°ë„ˆ -->
            <div class="insurance-banner history-banner" role="region" aria-label="ê°€ì…ë‚´ì—­ ì¡°íšŒ">
                <!-- ìš°ì¸¡ ìƒë‹¨ ë¡œê³  -->
                <div class="top-right-logo">
                    <img src="images/db-logo.png" alt="DBì†í•´ë³´í—˜" class="logo-img">
                </div>
                
                <div class="banner-title">ê°€ì…ë‚´ì—­ ì¡°íšŒ</div>
                <div class="banner-subtitle">DB ì†í•´ë³´í—˜</div>
                <div class="banner-amount">í™€ì¸ì› ê³¨í”„ë³´í—˜</div>
                
                <!-- ê²€ìƒ‰ ì•„ì´ì½˜ ì¥ì‹ -->
                <div class="search-decoration">
                    <div class="search-icon-container">
                        <div class="search-icon">ğŸ”</div>
                        <div class="search-circles">
                            <div class="circle circle-1"></div>
                            <div class="circle circle-2"></div>
                            <div class="circle circle-3"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <div class="section-title">
                    <span class="section-icon">ğŸ“‹</span>
                    ê°€ì…ë‚´ì—­ ì¡°íšŒ
                </div>
                
                <!-- ê²€ìƒ‰ ì„¹ì…˜ -->
                <div class="search-section">
                    <div class="search-container">
                        <div class="form-group enhanced">
                            <label for="search-phone" class="form-label">
                                <span class="input-icon">ğŸ“±</span>íœ´ëŒ€í°ë²ˆí˜¸ <span class="required">*</span>
                            </label>
                            <div class="input-with-icon">
                                
                                <input type="tel" class="form-control" id="search-phone" 
                                       placeholder="010-1234-5678" required 
                                       maxlength="13" 
                                       pattern="[0-9]{3}-[0-9]{4}-[0-9]{4}">
                            </div>
                            <small class="form-help">ê°€ì… ì‹œ ì‚¬ìš©í•œ íœ´ëŒ€í°ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”</small>
                        </div>
                        
                        <button class="submit-button enhanced" id="search-button">
                            <span class="button-text">ì¡°íšŒí•˜ê¸°</span>
                            <span class="button-icon">ğŸ”</span>
                            <div class="button-loading" style="display: none;">
                                <div class="loading-spinner"></div>
                            </div>
                        </button>
                    </div>
                </div>
                
                <!-- ë¡œë”© ë©”ì‹œì§€ -->
                <div id="loading-message" style="display: none;">
                    <div class="loading-container">
                        <div class="loading-spinner large"></div>
                        <div class="loading-text">ê°€ì…ë‚´ì—­ì„ ì¡°íšŒí•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
                    </div>
                </div>
                
                <!-- ê²€ìƒ‰ ê²°ê³¼ ì„¹ì…˜ -->
                <div id="history-results" class="history-results" style="display: none;">
                    <div class="history-header">
                        <div class="history-title">
                            <span class="title-icon">ğŸ“‹</span>
                            ê°€ì… ë‚´ì—­
                        </div>
                        <div class="history-count">
                            ì´ <span id="history-count-number">0</span>ê±´
                        </div>
                    </div>
                    
                    <div id="history-list" class="history-list">
                        <!-- ì¡°íšŒ ê²°ê³¼ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                </div>
                
                <!-- ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ -->
                <div id="no-history" class="no-history" style="display: none;">
                    <div class="no-history-animation">
                        <div class="no-history-icon">ğŸ“‹</div>
                        <div class="search-lines">
                            <div class="search-line line-1"></div>
                            <div class="search-line line-2"></div>
                            <div class="search-line line-3"></div>
                        </div>
                    </div>
                    <div class="no-history-content">
                        <div class="no-history-text">ê°€ì… ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</div>
                        <div class="no-history-subtext">
                            ì…ë ¥í•˜ì‹  ë²ˆí˜¸ë¡œ ê°€ì…ëœ ë‚´ì—­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤<br>
                            ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì‹œê±°ë‚˜ ìƒˆë¡œ ê°€ì…í•´ì£¼ì„¸ìš”
                        </div>
                        <div class="no-history-actions">
                            <button class="secondary-button" id="try-again-search">
                                ë‹¤ì‹œ ì¡°íšŒí•˜ê¸°
                            </button>
                            <button class="submit-button" id="go-to-signup-btn">
                                ë³´í—˜ ê°€ì…í•˜ê¸°
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ìƒì„¸ ì •ë³´ ëª¨ë‹¬ -->
        <div class="popup-overlay" id="detail-popup-overlay">
            <div class="popup-content large">
                <div class="popup-header">
                    <div class="popup-title" id="detail-popup-title">ê°€ì… ìƒì„¸ ì •ë³´</div>
                    <button class="popup-close" id="detail-popup-close">Ã—</button>
                </div>
                <div class="popup-body">
                    <div id="detail-popup-content">
                        <!-- ìƒì„¸ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                </div>
                <div class="popup-footer">
                    <button class="popup-button secondary" id="detail-popup-cancel">ë‹«ê¸°</button>
                    <button class="popup-button primary" id="detail-popup-print">ì¸ì‡„í•˜ê¸°</button>
                </div>
            </div>
        </div>
        
        <!-- ì•Œë¦¼ íŒì—… -->
        <div class="popup-overlay" id="popup-overlay">
            <div class="popup-content">
                <div class="popup-title" id="popup-title">ì•Œë¦¼</div>
                <div class="popup-message" id="popup-message">ì²˜ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</div>
                <button class="popup-button" id="popup-button">í™•ì¸</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ì „í™”ë²ˆí˜¸ ìë™ í¬ë§·íŒ…
            const phoneInput = document.getElementById('search-phone');
            if (phoneInput) {
                phoneInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/[^\d]/g, '');
                    
                    if (value.length >= 3 && value.length <= 7) {
                        value = value.replace(/(\d{3})(\d+)/, '$1-$2');
                    } else if (value.length >= 8) {
                        value = value.replace(/(\d{3})(\d{4})(\d+)/, '$1-$2-$3');
                    }
                    
                    e.target.value = value;
                });

                // í¬ì»¤ìŠ¤ ì‹œ ì…ë ¥ í•„ë“œ í•˜ì´ë¼ì´íŠ¸
                phoneInput.addEventListener('focus', function() {
                    this.classList.add('focused');
                });

                phoneInput.addEventListener('blur', function() {
                    this.classList.remove('focused');
                });
            }

            // ê²€ìƒ‰ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
            const searchIcon = document.querySelector('.search-icon');
            if (searchIcon) {
                setInterval(() => {
                    searchIcon.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        searchIcon.style.transform = 'scale(1)';
                    }, 500);
                }, 3000);
            }

            // ì„œí´ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
            const circles = document.querySelectorAll('.circle');
            circles.forEach((circle, index) => {
                circle.style.animationDelay = `${index * 0.3}s`;
            });

            // ë„ì›€ë§ í† ê¸€ ê¸°ëŠ¥
            const helpTitle = document.querySelector('.help-title');
            const helpContent = document.querySelector('.help-content');
            if (helpTitle && helpContent) {
                helpTitle.addEventListener('click', function() {
                    helpContent.classList.toggle('expanded');
                    const icon = this.querySelector('.help-icon');
                    icon.textContent = helpContent.classList.contains('expanded') ? 'ğŸ’¡' : 'ğŸ’¡';
                });
            }

            // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (Enterë¡œ ê²€ìƒ‰)
            phoneInput?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('search-button')?.click();
                }
            });
        });
    </script>
    <script src="js/common.js"></script>
    <script src="js/history.js"></script>
</body>
</html>