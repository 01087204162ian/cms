<!-- 검색 섹션 -->
<?php
session_start();
?>
	<div class="search-section">
		<div class="search-left">
			<div class="search-container">
				<div class="radio1-group">
				   <select id="cSelect" class="custom-select">
						<option value="1">정확</option>
						<option value="2">포함</option>
						<option value="3">증권번호</option>
					</select>
					<input type="text" id="search-school" placeholder="학교명을 입력하세요">
					<button id="search-btn" class='searchBtn'>검색</button>
				</div>
			</div>
		</div>
		<div class="button-group">
			<button class="btn1" id="claimPerformance">실적</button>
			<button class="btn1">버튼 2</button>
			<button class="btn1">버튼 3</button>
		</div>
	</div>

	<!-- 테이블 컨테이너 -->
	<div class="table-container">
		<table id="questionnaire-table">
			<thead>
				<tr>
					<th>순번</th>
					<th>사업자번호</th>
					<th>계약자</th>
					<th>증권번호</th>
					<th>접수번호</th>
					<th>상태</th>
					<th>보험금지급일</th>
					<th>보험금</th>
					<th>학생</th>
					<th>사고일자</th>
					<th>사공경위</th>
					<th>이메일</th>
					<th>클레임</th>
					<th>메모</th>
					<th>담당자</th>
				</tr>
			</thead>
			<tbody></tbody>
		</table>
	</div>

	<!-- 페이지네이션 -->
	<div class="pagination"></div>
</div>

<script src="/simg/contents/internship/js/claim.js"></script>



    






<div id="sjModal" class="pModal">
    <div class="modal-content">
        <!-- Modal Header -->
        <div class="pModal-header">
            <h4 class="modal-title">
				<span id='sjTitle'></span>
            </h4>
			<div id="yearContainer1"></div> <!-- 여기서 <select>를 동적으로 생성 -->
        </div>

        <!-- Modal Body -->
		<div class="modal-body">
			<table id="claimTable">
				<thead>
					<tr>
						<th>년 월</th>
						<th>접수</th>
						<th>미결</th>
						<th>종결</th>
						<th>면책</th>
						<th>취소</th>
						<th>계</th>
						<th>종결 보험금 합계</th>
						<th>보험료 합계</th>
						<th>손해율</th>
					</tr>
				</thead>
				<tbody></tbody>
				<tfoot>
					<tr>
						<th>소계</th>
						<td id="totalReceived" class="right-align">0</td>
						<td id="totalPending" class="right-align">0</td>
						<td id="totalCompleted" class="right-align">0</td>
						<td id="totalExempted" class="right-align">0</td>
						<td id="totalCanceled" class="right-align">0</td>
						<td id="totalAll" class="right-align">0</td>
						<td id="totalClaimAmount" class="right-align">0</td>
						<td id="totalPremiumAmount" class="right-align">0</td> <!-- 보험료 합계 추가 -->
						<td id="totalLossRatio" class="right-align">0</td> <!-- 손해율 -->
					</tr>
				</tfoot>
			</table>



		</div>
        <!-- Modal Footer -->
        <div class="modal-footer">
           <span id='changeP'></span>
        </div>
    </div>
</div>

<div id="uploadModal" class="upModal">
    <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
            <span id="cName">파일 업로드</span>
			<button class="close-upmodal">X</button>
        </div>
        <input type="hidden" id="qNum" />

        <!-- Modal Body -->
        
            <div class="upload-container">
                <!-- 파일 타입 선택 -->
                
            </div>
        

        <!-- 파일 목록 테이블 -->
        <div>
            <table class="file-table">
                <thead>
                    <tr>
                        <th>순번</th>
                        <th>파일의종류</th>
                        <th>(설계/증권)번호</th>
                        <th>파일명</th>
                        <th>입력일자</th>
                        <th>기타</th>
                    </tr>
                </thead>
                <tbody id="file_list"></tbody>
            </table>
        </div>

        <!-- Modal Footer -->
        <div class="modal-footer">파일 업로드를 완료하세요.</div>
    </div>
</div>


<!-- 
1. 클레임 버튼 (questions.php)
	- 클릭 시: 
		$('#third-modal').fadeIn(); 실행 (JS 파일: lincModal.js)
	- 백엔드 요청:
		url: '_db/get_questionnaire_details.php'
	- 동작 방식:
		questionnaire 테이블에서 num 값을 이용하여 계약자 정보를 호출
		클레임 관련 정보를 저장 및 업데이트
2. 번호 클릭 (claimList2.php)
	- 클릭 시: 
		$('#third-modal').fadeIn(); 실행 (JS 파일: c_q_modal.js)
	- 백엔드 요청: 
		url: '_db/claim/get_claim_details.php'
	- 동작 방식:
		claim 테이블의 num 값을 이용하여 클레임 정보를 호출
		questionnaire 테이블의 certi 값을 참조하여 계약자 번호를 가져옴
3. 클레임 저장 (claimStore 버튼)
	- 클릭 시: 
		클레임 정보 저장 (claimEtc.js) 
		 questions.php 저장은 cNum 저장 또는 업데이트 가능
		 claimList2.php 업데이트 
-->
<div id="third-modal" class="k_1_claimModal">
    <div class="modal-content">
        
        <div id="second-modal-body">
            <input type='hidden' id='claimNum__'><!-- claim Table ㅜㅕㅡ -->
			<input type='hidden' id='questionNum__'><!-- questionnaire Table num -->
            <input type='hidden' id='userName__' value='<?=$userName?>'>
			<input type='hidden' id='cNum__'><!-- 2014Costmer Table num -->
            <!-- 두 번째 모달 내용 -->
            <div style="display: flex; align-items: center; line-height: 1.5;">
				 증권번호 : <span id="certi__" style="margin-left: 5px; display: inline-block;"></span>
				<!--<div class="button-group">
				<select id="noticeSelect" class="btn-primary">
				   <option value="-1">공지사항</option>
					<option value="1">[보험금 청구] 보험금 청구시 필요서류 안내</option>
					<option value="2">[이용안내문] 한화 현장실습 보험 이용 안내문</option>
					<option value="3">[무사고 확인서 메일]</option>
				</select>-->
			</div>
            </div>
            <table class="file-table">
                <tr> 
                    <th width='20%'>사업자번호</th>
                    <td width='30%'><span id='school_2_'></span></td>
                    <th width='20%'>계약자</th>
                    <td width='30%'><span id='school_1_'></span></td>
					
                    
                </tr>
                <tr> 
                    <th>주소</th>
                    <td colspan='3'><span id='school_3_'></span></td>
                </tr>

                <tr> 
                    <th>시기</th>
                    <td><span id='school_6_'></span></td>
                    <th>실습기간</th>
                    <td><span id='school_7_'></span>~<span id='school_8_'></span></th>
				</tr>
					<th>연락처</th>
                    <td><span id='school_4_'></span></td>
					<th>이메일</th>
                    <td><span id='school_5_'></span></td>
                </tr>
                <tr> 
                    <th>가입유형</th>
                    <td colspan='3'><span id='school_9_'></span> 대인대물 한도<span id='daein1__'></span> 산재초과 대인대물<span id='daein2__'></span></td>
                </tr>
				 <tr>
					<td class='btd' colspan='4'>
						<div class="claim-button-container">
							<button type="button" id="claimStore" class="styled-button">클레임 저장</button>
						</div>
					</td>
				</tr>
				 <tr>
                    <th>학생</th>
                    <td ><input type="text" id="student" class="styled-input" placeholder="학생명을 입력하세요" /></td>
					<td  colspan='2'></td>
				</tr>
                <tr>
                    <th>사고일자</th>
                    <td  >
                        <input type="text" id="wdate_3" class="styled-input" placeholder="사고일자 입력하세요" />
                    </td>
                    <th>사고접수번호</th>
                    <td  >
                        <input type="text" id="claimNumber" class="styled-input" placeholder="사고 접수번호를 입력하세요" />
                    </td>
					
                </tr>
			
               
				<tr>
					<th>보험금지급일</th>
                    <td ><input type="text" id="wdate_2" class="styled-input" placeholder="보험금 지급일 입력하세요" /></td>
                    <th >보험금</th>
                    <td ><input type="text" id="claimAmout" class="styled-input right-align" placeholder="보험금" /></td>
                </tr>
               
				 <tr>
                    <th >사고경위</th>
                    <td colspan='3'><textarea id="accidentDescription" class="styled-input" placeholder="사고경위를 입력하세요" rows="4" maxlength="500"></textarea></td>
                </tr>
                <tr>
                    <th >담당자</th>
                    <td ><input type="text" id="damdanga_" class="styled-input" placeholder="담당자 이름을 입력하세요" /></td>
                    <th>연락처</th>
                    <td ><input type="text" id="damdangat_" class="styled-input" placeholder="숫자만 입력하세요" /></td>
                </tr>
            </table>

            <!-- 추가 버튼 -->
			
        </div>
    </div>
</div>


